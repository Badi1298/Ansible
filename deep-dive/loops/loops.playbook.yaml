- name: Looping
  hosts: linux
  tasks:
    - name: Use with_items
      ansible.builtin.copy:
        content: Welcome to {{ item }} Linux - Ansible Rocks!
        dest: /etc/motd
        mode: "0644"
      with_items:
        - CentOS
        - Ubuntu
      when: ansible_distribution == item
      notify: MOTD changed
    - name: Add users
      ansible.builtin.user:
        name: "{{ item.key }}"
        comment: "{{ item.value.full_name }}"
      with_dict:
        john:
          full_name: John Doe
        bob:
          full_name: Bob the Builder
  handlers:
    - name: MOTD changed
      ansible.builtin.debug:
        msg: MOTD has changed
